generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model funcionario {
  id             Int       @id @default(autoincrement())
  filial         String
  identificacao  String    @unique
  nome           String
  turnoId        Int
  centroCustoId  Int
  funcaoId       Int
  localidadeId   String
  dataNascimento DateTime
  dataAdmissao   DateTime
  dataDemissao   DateTime?
  createAt       DateTime? @default(now())
  updateAt       DateTime? @updatedAt
  userName       String?

  turno        turno                    @relation(fields: [turnoId], references: [id], onDelete: Cascade)
  centro_custo centro_custo             @relation(fields: [centroCustoId], references: [id], onDelete: Cascade)
  funcao       funcao                   @relation(fields: [funcaoId], references: [id], onDelete: Cascade)
  endereco     endereco?
  contatos     contato[]
  emails       email[]
  cartao       cartao[]
  afastamento  funcionarios_afastados[]
  eventos      eventos[]

  localidade           localidade             @relation(fields: [localidadeId], references: [codigo], onDelete: Cascade)
  atestado_funcionario atestado_funcionario[]
}

model localidade {
  codigo       String        @id @unique
  nome         String
  funcionarios funcionario[]
}

model turno {
  id        Int    @id @unique @default(autoincrement())
  nome      String
  cod_turno String @unique

  funcionarios funcionario[]
}

model centro_custo {
  id           Int           @id @unique @default(autoincrement())
  nome         String        @unique
  funcionarios funcionario[]
}

model funcao {
  id           Int           @id @unique @default(autoincrement())
  nome         String        @unique
  funcionarios funcionario[]
}

model endereco {
  id          Int    @id @default(autoincrement())
  rua         String
  numero      String
  complemento String
  bairro      String
  cidade      String
  estado      String
  cep         String

  funcionarioId Int         @unique
  funcionario   funcionario @relation(fields: [funcionarioId], references: [id], onDelete: Cascade)
}

model contato {
  id            Int          @id @unique @default(autoincrement())
  numero        String       @unique
  funcionarioId Int?
  funcionario   funcionario? @relation(fields: [funcionarioId], references: [id], onDelete: Cascade)
}

model email {
  id            Int          @id @unique @default(autoincrement())
  nome          String       @unique
  funcionarioId Int?
  funcionario   funcionario? @relation(fields: [funcionarioId], references: [id], onDelete: Cascade)
}

model cartao {
  id               Int       @id @default(autoincrement())
  funcionarioId    Int
  referencia       DateTime
  saldoAnterior60  Int
  saldoAnterior100 Int
  statusId         Int
  createAt         DateTime? @default(now())
  updateAt         DateTime? @updatedAt
  userName         String?

  funcionario   funcionario    @relation(fields: [funcionarioId], references: [id], onDelete: Cascade)
  cartao_dia    cartao_dia[]
  cartao_status cartao_status? @relation(fields: [statusId], references: [id], onDelete: Cascade)

  @@unique([funcionarioId, referencia])
}

model cartao_status {
  id   Int    @id
  nome String @unique

  cartao cartao[]
}

model cartao_dia {
  id                      Int                     @id @default(autoincrement())
  data                    DateTime
  statusId                Int
  cartaoId                Int
  periodoDescanso         Int
  cargaHor                Int
  cargaHorPrimeiroPeriodo Int
  cargaHorSegundoPeriodo  Int
  cargaHorariaCompleta    String
  cargaHorariaNoturna     Int                     @default(0)
  createAt                DateTime?               @default(now())
  updateAt                DateTime?               @updatedAt
  userName                String?
  cartao_dia_status       cartao_dia_status       @relation(fields: [statusId], references: [id], onDelete: Cascade)
  cartao                  cartao                  @relation(fields: [cartaoId], references: [id], onDelete: Cascade)
  cartao_dia_lancamentos  cartao_dia_lancamento[]
  eventos                 eventos[]

  @@unique([cartaoId, data])
}

model cartao_dia_status {
  id          Int          @id
  nome        String
  cartao_dias cartao_dia[]
}

model cartao_dia_lancamento {
  id                  Int       @id @default(autoincrement())
  periodoId           Int
  entrada             DateTime?
  saida               DateTime?
  diferenca           Int       @default(0)
  statusId            Int       @default(1)
  cartao_dia_id       Int
  validadoPeloOperado Boolean   @default(false)
  createAt            DateTime? @default(now())
  updateAt            DateTime? @updatedAt
  userName            String?

  cartao_dia_lancamento_periodo cartao_dia_lancamento_periodo @relation(fields: [periodoId], references: [id], onDelete: Cascade)
  cartao_dia                    cartao_dia                    @relation(fields: [cartao_dia_id], references: [id], onDelete: Cascade)
  cartao_dia_lancamento_status  cartao_dia_lancamento_status? @relation(fields: [statusId], references: [id], onDelete: Cascade)

  @@unique([cartao_dia_id, periodoId])
}

model cartao_dia_lancamento_periodo {
  id                     Int                     @id
  nome                   String                  @unique
  cartao_dia_lancamentos cartao_dia_lancamento[]
}

model cartao_dia_lancamento_status {
  id                     Int                     @id
  nome                   String                  @unique
  cartao_dia_lancamentos cartao_dia_lancamento[]
}

model funcionarios_afastados {
  id            Int       @id @default(autoincrement())
  inicio        DateTime
  fim           DateTime?
  total         Int
  funcionarioId Int
  statusId      Int
  userName      String?

  funcionario                   funcionario?                  @relation(fields: [funcionarioId], references: [id])
  funcionarios_afastados_status funcionarios_afastados_status @relation(fields: [statusId], references: [id], onDelete: Cascade)

  @@unique([inicio, funcionarioId, statusId])
}

model funcionarios_afastados_status {
  id                     Int                      @id
  nome                   String                   @unique
  funcionarios_afastados funcionarios_afastados[]
}

model atestado_funcionario {
  id               Int      @id @default(autoincrement())
  nome_funcionario String
  identificacao    String
  inicio           DateTime
  fim              DateTime
  saida            Int?
  retorno          Int?
  tipo             String
  grupo_cid        String
  descricao        String
  userName         String?
  funcionarioId    Int?

  funcionario funcionario? @relation(fields: [funcionarioId], references: [id])
}

model descricaco_cid {
  id         Int    @id @default(autoincrement())
  grupo_cid  String
  descricaco String
}

model eventos {
  id            Int     @id @default(autoincrement())
  cartaoDiaId   Int
  hora          String
  funcionarioId Int
  minutos       Int
  tipoId        Int?
  tratado       Boolean @default(false)

  tipo_eventos tipo_eventos? @relation(fields: [tipoId], references: [id], onDelete: Cascade)
  funcionario  funcionario   @relation(fields: [funcionarioId], references: [id])
  cartao_dia   cartao_dia?   @relation(fields: [cartaoDiaId], references: [id], onDelete: Cascade)
}

model tipo_eventos {
  id      Int       @id @default(autoincrement())
  nome    String
  eventos eventos[]
}

model grupo_trabalho {
  id                      Int     @id @default(autoincrement())
  cod_turno               String
  descri_turno            String
  status_turno            String
  dia_semana              String
  tipo_dia                String
  hora_1_entrada          String
  hora_1_saida            String
  hora_2_entrada          String
  hora_2_saida            String
  hora_3_entrada          String
  hora_3_saida            String
  hora_4_entrada          String
  hora_4_saida            String
  total_horas_1_periodo   String
  total_horas_2_periodo   String
  total_horas_3_periodo   String
  total_horas_4_periodo   String
  total_horas_1_intervalo String
  total_horas_2_intervalo String
  total_horas_3_intervalo String
  total_horas_trabalhadas String
  total_horas_intervalo   String
  total_horas_dia         String
  userName                String?
}
